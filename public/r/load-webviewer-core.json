{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "load-webviewer-core",
  "description": "Component for dynamically loading WebViewer Core script",
  "files": [
    {
      "path": "registry/components/load-webviewer-core.tsx",
      "content": "\"use client\";\n\nimport {\n  useState,\n  useEffect,\n  useRef,\n  type PropsWithChildren,\n  type ReactNode,\n} from \"react\";\nimport Script from \"next/script\";\nimport { DEFAULT_WEBVIEWER_PATH } from \"@/lib/webviewer-constants\";\n\nexport type LoadWebviewerCoreProps = PropsWithChildren<{\n  /**\n   * Path to the PDFTron/Apryse WebViewer files.\n   * Defaults to NEXT_PUBLIC_PDFTRON_PATH environment variable or \"/webviewer\".\n   */\n  pdftronPath?: string;\n  /**\n   * Custom loading UI to display while the script is loading.\n   * Defaults to a simple \"Loading WebViewer...\" div.\n   */\n  loadingUI?: ReactNode;\n  /**\n   * Custom error UI to display if the script fails to load.\n   * Defaults to a simple \"Failed to load WebViewer Core script\" div.\n   */\n  errorUI?: ReactNode;\n  /**\n   * Callback when the script loads successfully.\n   */\n  onLoad?: () => void;\n  /**\n   * Callback when the script fails to load.\n   */\n  onError?: (error: Error) => void;\n}>;\n\nexport const LoadWebviewerCore = ({\n  children,\n  pdftronPath = process.env.NEXT_PUBLIC_PDFTRON_PATH || DEFAULT_WEBVIEWER_PATH,\n  loadingUI = <div>Loading WebViewer...</div>,\n  errorUI = <div>Failed to load WebViewer Core script</div>,\n  onLoad,\n  onError,\n}: LoadWebviewerCoreProps) => {\n  const [ready, setReady] = useState(\n    () => typeof window !== \"undefined\" && !!window.Core\n  );\n  const [error, setError] = useState(false);\n  const timeoutRef = useRef<NodeJS.Timeout | null>(null);\n\n  useEffect(() => {\n    if (window.Core) {\n      setReady(true);\n    }\n\n    return () => {\n      if (timeoutRef.current) {\n        clearTimeout(timeoutRef.current);\n      }\n    };\n  }, []);\n\n  if (error) {\n    return <>{errorUI}</>;\n  }\n\n  return (\n    <>\n      <Script\n        src={`${pdftronPath}/core/webviewer-core.min.js`}\n        strategy=\"afterInteractive\"\n        onLoad={() => {\n          if (window.Core) {\n            setReady(true);\n            onLoad?.();\n          } else {\n            // Retry once after a short delay in case Core initializes asynchronously\n            timeoutRef.current = setTimeout(() => {\n              if (window.Core) {\n                setReady(true);\n                onLoad?.();\n              } else {\n                setError(true);\n                onError?.(new Error(\"WebViewer Core failed to initialize\"));\n              }\n            }, 100);\n          }\n        }}\n        onError={() => {\n          if (!window.Core) {\n            setError(true);\n            onError?.(new Error(\"Failed to load WebViewer Core script\"));\n          }\n        }}\n      />\n      {ready ? children : loadingUI}\n    </>\n  );\n};\n",
      "type": "registry:component"
    }
  ],
  "type": "registry:component"
}